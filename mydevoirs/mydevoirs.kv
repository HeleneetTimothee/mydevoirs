#: import MATIERES mydevoirs.constants.MATIERES
#: import COLORS mydevoirs.constants.COLORS
#: import datas  mydevoirs.utils.datas
#: import MatiereOption mydevoirs.matieredropdown.MatiereOption
#: import MatiereDropdown mydevoirs.matieredropdown.MatiereDropdown
#: import gmc mydevoirs.utils.gmc


<ActionBar>:
	id: actionbar
    ActionView:
		ActionPrevious:
			with_previous: False

        ActionButton:
        	id: go_todo
		    icon: datas['icon_todo']
            on_release: app.go_todo()
        ActionButton:
        	id: go_agenda
		    icon: datas['icon_agenda']
            on_release: app.go_agenda()
		ActionButton:
			id: previous
		    icon: datas['icon_precedant'] if app.sm.current == "agenda" else ""
		    on_release: app.sm.current_screen.carousel.load_previous()
		    # on_release: app.sm.current_screen.carousel.index=0

		    disabled: app.sm.current != "agenda"
		    background_disabled_normal: self.background_normal

		ActionButton:
			id: next
		    icon: datas['icon_suivant'] if app.sm.current == "agenda" else ""
		    disabled: app.sm.current != "agenda"
		    background_disabled_normal: self.background_normal
		    on_release: app.sm.current_screen.carousel.load_next()

		ActionButton:
			id: params
		    text: 'Param√®tres' # pragma: no cover
		    # icon: 'data/icons/chevron-right.png'
		    on_release: app.open_settings()

<BaseGrid>:
	spacing: dp(10)
	padding: dp(10)
	canvas.before:
		Color:
			rgba: COLORS["fond"]
		Rectangle:
			pos: self.pos
            size: self.size


<JourWidget>:
	orientation: 'vertical' # pragma: no cover
	canvas.before:
		Color:
			rgba: COLORS['card']
		Rectangle:
			pos: self.pos
            size: self.size
	BoxLayout:
		id: zone_titre
		orientation: 'horizontal' # pragma: no cover
		size_hint_y: None
		height: dp(30)
		canvas.before:
			Color:
				rgba: COLORS['card_entete']
			Rectangle:
				pos: self.pos
	            size: self.size
	    Label:
	    	id: titre_jour
	    	text: root.nice_date
	    	font_name: datas['font_base']
	    	font_size: sp(16)
	    Label:
	    	text: root.progression
	    	font_name: datas['font_base']
	    	font_size: sp(16)
	    	size_hint_x: 0.3 # pragma: no cover
	    	color: COLORS['fond'] if root.progression[0] == root.progression[2] else COLORS['progression']
	    Button:
	    	id: add_button
	    	size_hint_x: 0.2  # pragma: no cover
	    	background_color: (0,0,0,0) # pragma: no cover
	    	on_release: root.add_item()
	    	BoxLayout:
	            pos: self.parent.pos
	            size: self.parent.size
		    	Image:
		    		source: datas['icon_new']
	ScrollView:
		id: scroll_items
		do_scroll_x: False


<JourItems>:
	id: jours_items
	size_hint_y: None
	spacing: dp(5)
	padding: dp(5)
	orientation: 'vertical' # pragma: no cover


<CarouselWidget>:

<DateLabel>:
	size_hint_y: None
	height: dp(30)
	spacing: dp(5)
	font_name: datas['font_base']
	font_size: sp(16)
	canvas.before:
        Color:
            rgb: COLORS['card_entete']
        Rectangle:
        	pos: self.pos
        	size: self.size