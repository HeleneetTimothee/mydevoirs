#: import MATIERES mydevoirs.constants.MATIERES
#: import datas  mydevoirs.datas.datas
#: import MatiereOption mydevoirs.matiere_dropdown.MatiereOption
#: import MatiereDropdown mydevoirs.matiere_dropdown.MatiereDropdown
#: import get_matiere_color mydevoirs.utils.get_matiere_color


<ActionBar>:
    ActionView:
		ActionPrevious:
			with_previous: False

        ActionButton:
            text: "Semaine en cours"
		    icon: datas['icon_today']
            on_release: app.go_date()
		ActionButton:
		    text: 'Semaine précédante'
		    icon: datas['icon_precedant']
		    on_release: app.carousel.load_previous()
		ActionButton:
		    text: 'Semaine suivante'
		    icon: datas['icon_suivant']
		    on_release: app.carousel.load_next()

		ActionButton:
		    text: 'Paramètres'
		    # icon: 'data/icons/chevron-right.png'
		    on_release: app.open_settings()

<BaseGrid>:
	spacing: dp(10)
	padding: dp(10)
	canvas.before:
		Color:
			rgba: (0, 1, 0,0.5)
		Rectangle:
			pos: self.pos
            size: self.size

	# padding: 20

<JourWidget>:
	orientation: 'vertical'
	canvas.before:
		Color:
			rgba: (1,0 , 0,0.5)
		Rectangle:
			pos: self.pos
            size: self.size
	BoxLayout:
		orientation: 'horizontal'
		size_hint_y: None
		height: dp(20)
		canvas.before:
			Color:
				rgba: (1,1, 1,0.5)
			Rectangle:
				pos: self.pos
	            size: self.size
	    Label:
	    	id: titre_jour
	    	text: root.nice_date
	    Button:
	    	id: add_button
	    	size_hint_x: 0.2

	    	text: '+'
	    	on_release: root.add_item()
	ScrollView:
		id: scroll_items
		do_scroll_x: False


<JourItems>:
	id: jours_items
	size_hint_y: None
	spacing: dp(5)
	padding: dp(5)
	cols: 1
	canvas.before:
		# Color:
		# 	rgba: (0.3,1, 1,0.5)
		Rectangle:
			pos: self.pos
            size: self.size




<ItemWidget>:
	size_hint_y: None
	height: dp(30)
	spacing: dp(5)
	canvas:
        Color:
            rgb: root.matiere_color
        Rectangle:
        	pos: self.pos
        	size: self.size

	Button:
		id: spinner
		text: root.matiere_nom
		on_release:
			MatiereDropdown().open(self)
		background_color: get_matiere_color(self.text)
		size_hint_x: 0.4
		font_size: sp(12)


	TextInput:
		id : textinput
		text: root.content
		on_text: root.content = self.text
		halign: 'left'
    	valign: 'middle'
    	multiline: False
    	write_tab: False


    CheckBox:
    	id: done
    	size_hint_x: 0.1
		active: root.done
		on_active: root.done = self.active

	Button:
		id: remove_item 
    	size_hint_x: 0.1
		text: "x"
		on_release: root.remove()

<EffacerPopup>:
	title: f"Effacer  {root.item.matiere_nom}: {root.item.content} ?"
    size_hint: .5, .2
    BoxLayout:
    	orientation: 'horizontal'
        Button:
        	id: oui
        	text: "oui"
	        on_press:
	        	root.item.remove_after_confirmation()
	        	root.dismiss()
	    Button:
	    	id: non
	    	text: "non"
	    	on_press:
	    		root.dismiss()