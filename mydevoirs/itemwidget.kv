<ItemWidget>:
    size_hint_y: None
    height: dp(30)
    spacing: dp(5)
    canvas:
        Color:
            rgb: rgba(root.matiere_color)
        Rectangle:
            pos: self.pos
            size: self.size

    Button:
        id: spinner
        text: root.matiere_nom
        on_release:
            MatiereDropdown().open(self)
        background_color: gmc(self.text)
        background_normal: ''
        color: (0,0,0,1)
        size_hint_x: 0.4
        font_size: sp(14)
        font_name: datas['font_base']


    TextInput:
        id : textinput
        text: root.content
        on_text: root.content = self.text
        halign: 'left'
        valign: 'middle'
        multiline: False
        write_tab: False
        font_name: datas['font_base']
        font_size: sp(14)


    ToggleButton:
        id: done
        size_hint_x: 0.1
        # source: datas['icon_unchecked']
        background_color: (1, 1, 1, 0)
        background_normal: ''
        on_release: root.done = (not root.done)
        BoxLayout:
            id: boximage
            pos: self.parent.x, self.parent.y +self.parent.height/2 - self.height/2
            size: self.parent.width*0.9, self.parent.height*0.9
            Image:
                source: datas['icon_checked'] if root.done else datas['icon_unchecked']


    Button:
        id: remove_item 
        size_hint_x: 0.1
        on_release: root.remove()
        background_color: (1, 1, 1, 0)
        BoxLayout:
            pos: self.parent.x, self.parent.y +self.parent.height/2 - self.height/2
            size: self.parent.width*0.7, self.parent.height*0.7
            Image:
                source: datas['icon_remove']


<EffacerPopup>:
    title: f"Effacer  {root.item.matiere_nom}: {root.item.content} ?"
    size_hint: .5, .2
    BoxLayout:
        orientation: 'horizontal'
        Button:
            id: oui
            text: "oui"
            on_press:
                root.item.remove_after_confirmation()
                root.dismiss()
        Button:
            id: non
            text: "non"
            on_press:
                root.dismiss()